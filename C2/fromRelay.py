import socket

SERVER_HOST = 'localhost'
SERVER_PORT = 4321

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

client_socket.connect((SERVER_HOST, SERVER_PORT))

message = "Client".encode()

try:
    client_socket.send(message)
    ready = None
    print("Waiting for connection...")
    while ready != "ready":
        ready = client_socket.recv(1024).decode()
    print("Connected.")

    while True:
        message = client_socket.recv(1024).decode()
        print(f'Received from client: {message}')
        if(len(message) == 0):
            print("Connection closed")
            break

except KeyboardInterrupt:
    pass

client_socket.close()

