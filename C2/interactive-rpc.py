
from pymetasploit3.msfrpc import MsfRpcClient

RPC_ADDRESS = '192.168.56.1'
RPC_PORT = '55553'
RPC_USER = 'admin'
RPC_PASS = 'hehehe'

client = MsfRpcClient(username=RPC_USER, password=RPC_PASS, server=RPC_ADDRESS, port=RPC_PORT, ssl=True)

#new console instance
console = client.call('console.create')
console_id = console["id"]
#print(console_id)

#len of the console list
console_check_1 = len(client.consoles.list)

#some commands here:





#destroy console and check list length
client.consoles.destroy(console_id)
console_check_2 = len(client.consoles.list)

if((console_check_1 - 1) == console_check_2):
    print("Console Successfully Killed... Closing.")
else:
    print("Error Killing Console, Check RPC Resources!... Closing.")


client.call('core.close')