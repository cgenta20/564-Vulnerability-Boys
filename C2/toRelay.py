import socket
from time import sleep

SERVER_HOST = 'localhost'
SERVER_PORT = 4321

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

client_socket.connect((SERVER_HOST, SERVER_PORT))

message = "Host".encode()

def get_ready(ready):
    while ready != "ready":
        ready = client_socket.recv(1024).decode()
    print("Connected.")
    return ready

try:
    client_socket.send(message)
    print("Awaiting Client.")
    ready = get_ready(None)

    while True:
        message = input("Message to Send: ")
        client_socket.sendall(message.encode())
        status = client_socket.recv(1024).decode()
        if status != "good":
            print("Client disconnected.")
            ready = get_ready(None)

except KeyboardInterrupt:
    pass

client_socket.close()

